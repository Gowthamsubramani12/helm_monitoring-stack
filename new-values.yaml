# Default values for prom-stack-chart.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  name: ""

# Prometheus Server Configuration
prometheus:
  image:
    repository: prom/prometheus
    tag: v2.45.0
    pullPolicy: IfNotPresent
  retention: 15d
  service:
    type: ClusterIP
    port: 80
  resources: {}
  persistence:
    enabled: true
    size: 8Gi
    storageClass: gp2
    accessMode: ReadWriteOnce

# Alertmanager Configuration
alertmanager:
  image:
    repository: prom/alertmanager
    tag: v0.25.0
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 9093
  resources: {}
  persistence: # Although StatefulSet uses volumeClaimTemplates, we can parameterize size/class
    size: 2Gi
    storageClass: gp2

# Grafana Configuration
grafana:
  image:
    repository: grafana/grafana
    tag: 10.0.0
    pullPolicy: IfNotPresent
  adminUser: admin
  adminPassword: password
  service:
    type: NodePort
    port: 3000
    nodePort: 30503 # Matching your cluster
  resources: {}
  persistence:
    enabled: true
    size: 10Gi
    storageClass: gp2
    accessMode: ReadWriteOnce
  datasources: # Added this block to prevent secret nil pointer
    enabled: true

# Loki Configuration (NEW)
loki:
  image:
    repository: grafana/loki
    tag: 2.8.2
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 3100
    memberlistPort: 7946

# Promtail Configuration (NEW)
promtail:
  image:
    repository: grafana/promtail
    tag: 2.8.2
    pullPolicy: IfNotPresent

# Node Exporter Configuration
nodeExporter:
  image:
    repository: quay.io/prometheus/node-exporter
    tag: v1.6.0
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 9100
  resources: {}

# Kube State Metrics Configuration
kubeStateMetrics:
  image:
    repository: registry.k8s.io/kube-state-metrics/kube-state-metrics
    tag: v2.9.2
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 8080
  resources: {}

# Pushgateway Configuration
pushgateway:
  image:
    repository: prom/pushgateway
    tag: v1.6.0
    pullPolicy: IfNotPresent
  service:
    type: ClusterIP
    port: 9091
  resources: {}
